(this["webpackJsonpsurvey-console"]=this["webpackJsonpsurvey-console"]||[]).push([[5],{104:function(e,t,r){"use strict";r.r(t);var n=r(10),a=r(24),l=r(0),o=r(41),c=r(56),i=r(111),u=r(110),b=r(109),d=r(121),s=r(125),j=r(40);var p,g={translateRole:function(e){var t;return(t={},Object(j.a)(t,i.l.ADMINISTRATOR,"Administrateur"),Object(j.a)(t,i.l.OPERATOR,"Op\xe9rateur"),t)[e]},getRoleColorScheme:function(e){var t;return(t={},Object(j.a)(t,i.l.ADMINISTRATOR,"green"),Object(j.a)(t,i.l.OPERATOR,"gray"),t)[e]},formatAccountsForTable:function(e,t){return Object(b.f)(t)||Object(b.f)(e)?e:e.filter((function(e){return e.id!==t.id}))}},O=r(120),f=r(38),y=r(39).a.div(p||(p=Object(f.a)([""]))),m=r(116),h=r(4);function v(e){var t=e.accounts,r=void 0===t?[]:t,n=e.onOpenCreateAccountForm;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(m.k,{children:[Object(h.jsx)(m.k.Header,{children:Object(h.jsx)(m.t.Title,{children:Object(u.a)()})}),Object(h.jsx)(m.k.Body,{children:Object(h.jsx)(m.q,{spacing:1.5,children:Object(h.jsx)(m.r,{variant:"default",label:Object(u.wb)(),value:r.length})})}),Object(h.jsx)(m.k.Footer,{children:Object(h.jsx)(m.d,{onClick:n,children:Object(u.p)()})})]})})}function x(e){var t=e.accounts,r=void 0===t?[]:t,n=e.requesting,a=void 0!==n&&n,l=e.onDeleteAccount;return Object(h.jsx)(m.e,{children:Object(h.jsx)(m.s,{columns:[{title:Object(u.z)(),key:"fullName",dataIndex:"fullName",sortable:!0},{title:Object(u.n)(),key:"createdAt",dataIndex:"createdAt",dataType:"date",sortable:!0},{title:Object(u.w)(),key:"email",dataIndex:"email"},{title:Object(u.kb)(),key:"role",dataIndex:"role",sortable:!0,formatter:g.translateRole,render:function(e){var t=e.role;return Object(h.jsx)(m.c,{colorScheme:g.getRoleColorScheme(t),children:g.translateRole(t)})}}],noDataMessage:Object(u.V)(),dataSource:r,requesting:a,actions:[{icon:Object(h.jsx)(m.h,{name:"delete"}),label:Object(u.L)(),onClick:l}]})})}var q=r(131),S=r(124),I=(r(117),r(112));function F(e){var t=e.mode,r=e.formState,n=e.formErrors,a=e.onChange,l=e.onSubmit,c=Object(o.b)((function(e){return e.ui.formState})).requesting;return Object(h.jsxs)(O.d,{children:[Object(h.jsxs)(O.d.Body,{children:[Object(h.jsx)(O.d.Group,{children:Object(h.jsx)(m.g,{fluid:!0,type:"text",name:"lastName",label:Object(u.B)(),defaultValue:r.lastName,error:n.lastName,onChange:a})}),Object(h.jsx)(O.d.Group,{children:Object(h.jsx)(m.g,{fluid:!0,type:"text",name:"firstName",label:Object(u.y)(),defaultValue:r.firstName,error:n.firstName,onChange:a})}),Object(h.jsx)(O.d.Group,{children:Object(h.jsx)(m.g,{fluid:!0,type:"select",name:"role",label:Object(u.nb)(),options:Object(I.d)(i.l),defaultOption:Object(I.j)(r.role),error:n.role,disabled:t===i.b.EDITION,onChange:a})}),Object(h.jsx)(O.d.Group,{children:Object(h.jsx)(m.g,{fluid:!0,type:"email",name:"email",label:Object(u.w)(),defaultValue:r.email,error:n.email,onChange:a})}),Object(h.jsx)(O.d.Group,{children:Object(h.jsx)(m.g,{fluid:!0,type:"password",name:"password",label:Object(u.cb)(),defaultValue:r.password,error:n.password,onChange:a})}),Object(h.jsx)(O.d.Group,{children:Object(h.jsx)(m.g,{fluid:!0,type:"password",name:"confirmPassword",label:Object(u.l)(),defaultValue:r.confirmPassword,error:n.confirmPassword,onChange:a})})]}),Object(h.jsx)(O.d.Footer,{children:Object(h.jsx)(O.d.Group,{children:Object(h.jsx)(m.d,{disabled:c,colorScheme:"secondary",onClick:function(){c||l()},children:Object(u.lb)()})})})]})}var w=r(127);t.default=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.core.accountsState})),r=t.accounts,j=t.requesting,p=Object(o.c)((function(e){return e.core.authState})).profile,f=Object(q.a)(),I=Object(S.a)(),C=Object(w.a)(),T=C.showAlert,A=C.hideAlert,k=Object(l.useState)({}),N=Object(a.a)(k,2),E=N[0],R=N[1];return Object(l.useEffect)((function(){e(Object(c.d)())}),[e]),Object(h.jsxs)(O.f,{children:[Object(h.jsxs)(y,{children:[Object(h.jsx)(v,{accounts:r,onOpenCreateAccountForm:function(){R({}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode;I.setMode(r),I.resetFormState(e),f.handleShow()}({},{mode:i.b.CREATION})}}),Object(h.jsx)(O.b,{}),Object(h.jsx)(x,{accounts:g.formatAccountsForTable(r,p),requesting:j,onDeleteAccount:function(t){T({message:Object(u.u)({account:t}),actions:Object(h.jsx)(m.d,{colorScheme:"red",onClick:function(){return function(t){A(),e(Object(c.c)({accountId:t.id}))}(t)},children:Object(u.t)()})})}})]}),f.shown&&Object(h.jsx)(m.m,{shown:!0,title:Object(u.Cb)(),onHide:f.handleHide,children:Object(h.jsx)(F,{mode:I.mode,formState:I.formState,formErrors:I.formErrors,onChange:I.handleChange,onSubmit:function(){Object(b.d)(E)||function(){var t=I.formState,r=d.a.validateForm(t,Object(s.a)()),a=r.validForm,l=r.formErrors;I.setFormErrors(l),a&&e(Object(c.a)({formState:Object(n.a)(Object(n.a)({},t),{},{deletable:!0}),onAccountCreated:f.handleHide}))}()}})})]})}},121:function(e,t,r){"use strict";var n=r(10),a=r(21),l=r(109),o=["property","label","type","fields","validate","required","minLength"];t.a={validateForm:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).currentIndex;return r.reduce((function(r,i){var u=r.validForm,b=r.formErrors,d=i.property,s=i.label,j=i.type,p=i.fields,g=i.validate,O=i.required,f=i.minLength,y=void 0===f?0:f,m=Object(a.a)(i,o),h=t[d];if("array"===j){(h||[Array(y).fill({})]).forEach((function(t,r){var n=e(t,p,{currentIndex:r});(u=u&&n.validForm)||(b[d]||(b[d]={}),b[d][r]=n.formErrors)}))}else{var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a={validField:!0,errorMessageSuffix:""},o=t.type,c=t.dataType,i=t.pattern,u=t.required,b=void 0!==u&&u,d=t.currentIndex;if(function(e,t,r){var a=e.value,o=e.required,c=e.currentIndex,i="function"===typeof o?o(Object(n.a)(Object(n.a)({},r),{},{currentIndex:c})):o;i&&Object(l.f)(a)&&(t.validField=!1,t.errorMessageSuffix=" obligatoire")}({value:e,required:b,currentIndex:d},a,r),!a.validField||Object(l.f)(e))return a;o&&function(e,t,r){typeof e!==t&&(r.validField=!1,r.errorMessageSuffix=" non valide")}(e,o,a);c&&function(e,t,r){var n={email:l.i,phone:l.j};if(!t||!Object.keys(n).includes(t))return;n[t](e)||(r.validField=!1,r.errorMessageSuffix=" non valide")}(e,c,a);i&&function(e,t,r){t&&!t.test(e)&&(r.validField=!1,r.errorMessageSuffix=" est non valide")}(e,i,a);return a}(h,Object(n.a)({type:j,required:O,currentIndex:c},m),t),x=v.validField,q=v.errorMessageSuffix;u=u&&x,x||(b[d]=s.concat(q))}return g&&(u=u&&g(t,b)),{validForm:u,formErrors:b}}),{validForm:!0,formErrors:{}})},extractFormStateUpdates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return Object.keys(t).forEach((function(n){JSON.stringify(t[n])!==JSON.stringify(e[n])&&(r[n]=t[n])})),r}}},124:function(e,t,r){"use strict";var n=r(40),a=r(10),l=r(24),o=r(0),c=r(123);t.a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onSubmit,t=Object(o.useState)({}),r=Object(l.a)(t,2),i=r[0],u=r[1],b=Object(o.useState)({}),d=Object(l.a)(b,2),s=d[0],j=d[1],p=Object(o.useState)([]),g=Object(l.a)(p,2),O=g[0],f=g[1],y=Object(o.useState)(""),m=Object(l.a)(y,2),h=m[0],v=m[1],x=Object(o.useCallback)((function(e){var t=e.name,r=e.value;u((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(n.a)({},t,r))})),j((function(e){if(e[t]){var r=Object(c.a)(e);return delete r[t],r}return e}))})),q=Object(o.useCallback)((function(t){t&&t.preventDefault(),e(t)}),[]),S=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.a)({},e);["id","created","updated","deleted","deletedAt"].forEach((function(e){return delete t[e]})),u((function(e){return Object(a.a)(Object(a.a)({},e),t)}))}),[]),I=Object(o.useCallback)((function(){u(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),j({})}),[]);return{formState:i,formErrors:s,formDisabledFields:O,mode:h,setFormErrors:j,setFormDisabledFields:f,handleChange:x,handleSubmit:q,updateFormState:S,resetFormState:I,setMode:v}}},125:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i}));var n=r(111),a=r(110),l=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).language,t=void 0===e?n.f.FR:e;return[{property:"email",type:"string",label:Object(a.w)({language:t}),required:!0},{property:"password",type:"string",label:Object(a.cb)({language:t}),required:!0}]},o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).language,t=void 0===e?n.f.FR:e;return[{property:"operationType",type:"string",label:Object(a.ab)({language:t}),required:!0},{property:"fullName",type:"string",label:Object(a.z)({language:t}),required:!0},{property:"buildingAge",type:"string",label:Object(a.g)({language:t}),required:!0},{property:"livingSpaceArea",type:"number",label:Object(a.C)({language:t}),required:!0},{property:"loftIncluded",type:"boolean",label:Object(a.F)({language:t}),required:!0},{property:"loftType",type:"string",label:Object(a.I)({language:t}),required:function(e){return e.loftIncluded}},{property:"loftArea",type:"number",label:Object(a.D)({language:t}),required:function(e){return e.loftIncluded}},{property:"loftInsulated",type:"boolean",label:Object(a.G)({language:t}),required:function(e){return e.loftIncluded}},{property:"loftInsulationPeriod",type:"string",label:Object(a.H)({language:t}),required:function(e){return e.loftInsulated}},{property:"loftComments",type:"string",label:Object(a.E)({language:t})},{property:"mprBeneficiary",type:"boolean",label:Object(a.T)({language:t}),required:!0},{property:"oneEuroBeneficiary",type:"boolean",label:Object(a.Z)({language:t}),required:!0},{property:"occupants",type:"array",required:!0,minLength:1,fields:[{property:"taxNoticeNumber",type:"string",label:Object(a.ub)({language:t}),required:function(e){return 0===e.currentIndex}},{property:"taxNoticeReference",type:"string",label:Object(a.vb)({language:t}),required:function(e){return 0===e.currentIndex}},{property:"referenceTaxIncome",type:"number",label:Object(a.jb)({language:t}),required:function(e){return 0===e.currentIndex}},{property:"birthDate",type:"object",label:Object(a.f)({language:t}),required:function(e){return 0===e.currentIndex}}]},{property:"numberOfDependents",type:"number",label:Object(a.X)({language:t}),required:!0},{property:"streetNumber",type:"string",label:Object(a.sb)({language:t}),required:!0},{property:"streetName",type:"string",label:Object(a.rb)({language:t}),required:!0},{property:"city",type:"string",label:Object(a.i)({language:t}),required:!0},{property:"postalCode",type:"string",label:Object(a.fb)({language:t}),required:!0},{property:"owningType",type:"string",label:Object(a.bb)({language:t}),required:!0},{property:"wallInsulationType",type:"string",label:Object(a.xb)({language:t}),required:!0},{property:"heatingType",type:"string",label:Object(a.A)({language:t}),required:!0},{property:"oilHeatingTypeBoiler",type:"boolean",label:Object(a.Y)({language:t}),required:function(e){return e.heatingType===n.c.GAS}},{property:"waterHeatingType",type:"string",label:Object(a.yb)({language:t}),required:!0},{property:"waterHeatingTypeSpecified",type:"string",label:Object(a.zb)({language:t})},{property:"basementIncluded",type:"boolean",label:Object(a.e)({language:t}),required:!0},{property:"lowFloorInsulationPeriod",type:"string",label:Object(a.J)({language:t}),required:function(e){return e.basementIncluded}},{property:"basementAreaForBoiler",type:"boolean",label:Object(a.d)({language:t}),required:function(e){return e.basementIncluded}},{property:"radiatorType",type:"string",label:Object(a.hb)({language:t})},{property:"fireplaceIncluded",type:"boolean",label:Object(a.x)({language:t}),required:!0},{property:"phone",type:"string",dataType:"phone",label:Object(a.eb)({language:t}),required:!0},{property:"comments",type:"string",label:Object(a.j)({language:t})}]},c=r(109),i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).language,t=void 0===e?n.f.FR:e;return[{property:"lastName",type:"string",label:Object(a.B)({language:t}),required:!0},{property:"firstName",type:"string",label:Object(a.y)({language:t}),required:!0},{property:"role",type:"string",label:Object(a.kb)({language:t}),required:!0},{property:"email",type:"string",dataType:"email",label:Object(a.w)({language:t}),required:!0},{property:"password",type:"string",label:Object(a.cb)({language:t}),required:!0},{property:"confirmPassword",type:"string",label:Object(a.l)({language:t}),required:!0,validate:function(e){var r=e.password,n=e.confirmPassword,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Object(c.e)(r)&&Object(c.e)(n)&&r===n;return o||(l.confirmPassword=Object(a.db)({language:t})),o}}]}},131:function(e,t,r){"use strict";var n=r(24),a=r(0);t.a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).initialTitle,t=void 0===e?"":e,r=Object(a.useState)(!1),l=Object(n.a)(r,2),o=l[0],c=l[1],i=Object(a.useState)(t),u=Object(n.a)(i,2);return{shown:o,title:u[0],setTitle:u[1],handleShow:Object(a.useCallback)((function(){c(!0)}),[]),handleHide:Object(a.useCallback)((function(){c(!1)}),[])}}}}]);
//# sourceMappingURL=5.4ab86644.chunk.js.map